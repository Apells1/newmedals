(this["webpackJsonpmedals-react"]=this["webpackJsonpmedals-react"]||[]).push([[0],{25:function(e,n,t){},28:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(18),o=t.n(a),s=(t(25),t(19)),i=t(3),u=t.n(i),d=t(5),l=t(20),f=t(0),m=function(e){var n=e.medal,t=e.country,r=e.onIncrement,c=e.onDecrement;return Object(f.jsxs)("div",{className:"medals",children:[n.name," Medals: ",t[n.name],Object(f.jsx)("button",{onClick:function(){return r(t.id,n.name)},children:"+"}),Object(f.jsx)("button",{disabled:0===t[n.name],onClick:function(){return c(t.id,n.name)},children:"-"})]})},p=function(e){var n=e.country,t=e.medals,r=e.onIncrement,c=e.onDecrement,a=e.onDelete;return Object(f.jsxs)("div",{className:"country",children:[Object(f.jsxs)("div",{className:"name",children:[n.name,Object(f.jsx)("span",{className:"badge",children:function(e,n){var t=0;return n.forEach((function(n){t+=e[n.name]})),t}(n,t)})]}),t.map((function(e){return Object(f.jsx)(m,{country:n,medal:e,onIncrement:r,onDecrement:c},e.id)})),Object(f.jsx)("button",{onClick:function(){return a(n.id)},children:"delete"}),Object(f.jsx)("hr",{})]})},j=(t(28),t(6)),b=t.n(j),h=function(e){var n=e.onAdd;return Object(f.jsx)("div",{className:"newCountryButton",children:Object(f.jsx)("button",{onClick:function(){var e=prompt("Enter country name");e&&e.trim().length>0&&n(e)},children:"New Country"})})},v=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],a=n[1],o="https://medalsapiandre.azurewebsites.net/api/country",i=Object(r.useRef)([{id:1,name:"gold"},{id:2,name:"silver"},{id:3,name:"bronze"}]);Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var n,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(o);case 2:n=e.sent,t=n.data,a(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var m=function(){var e=Object(d.a)(u.a.mark((function e(n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(o,{name:n});case 2:r=e.sent,c=r.data,a(t.concat(c));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(o,"/").concat(n));case 2:a(t.filter((function(e){return e.id!==n})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(e,n){return O(e,n,1)},x=function(e,n){return O(e,n,-1)},O=function(){var e=Object(d.a)(u.a.mark((function e(n,r,c){var i,d,l,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,d=t.findIndex((function(e){return e.id===n})),(l=Object(s.a)(t))[d][r]+=1*c,a(l),f=[{op:"replace",path:r,value:l[d][r]}],console.log("json patch for id: ".concat(n,": ").concat(JSON.stringify(f))),e.prev=7,e.next=10,b.a.patch("".concat(o,"/").concat(n),f);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.response&&404===e.t0.response.status?console.log("The record does not exist - it may have already been deleted"):(alert("An error occurred while updating"),a(i));case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(n,t,r){return e.apply(this,arguments)}}();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsxs)("div",{className:"appHeading",children:["Olympic Medals",Object(f.jsx)("span",{className:"badge",children:function(){var e=0;return i.current.forEach((function(n){e+=t.reduce((function(e,t){return e+t[n.name]}),0)})),e}()})]}),Object(f.jsx)("div",{className:"countries",children:t.map((function(e){return Object(f.jsx)(p,{country:e,medals:i.current,onDelete:j,onIncrement:v,onDecrement:x},e.id)}))}),Object(f.jsx)(h,{onAdd:m})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,49)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),x()}},[[48,1,2]]]);
//# sourceMappingURL=main.b0456274.chunk.js.map